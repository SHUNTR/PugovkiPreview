const swiper=new Swiper(".main-swiper",{slidesPerView:"auto",centeredSlides:!0,grabCursor:!0,spaceBetween:30,pagination:{clickable:!0,el:".swiper-pagination"},navigation:{nextEl:".swiper__button-next",prevEl:".swiper__button-prev"},autoplay:{delay:3e3}}),CategorySwiper=new Swiper(".category-swiper",{lazy:!0,grabCursor:!0,slidesPerView:"7",slidesPerGroup:7,navigation:{nextEl:".swiper__button-next",prevEl:".swiper__button-prev"},breakpoints:{1600:{slidesPerView:"6",slidesPerGroup:6},1366:{slidesPerView:"5",slidesPerGroup:5},980:{slidesPerView:"4",slidesPerGroup:4},768:{slidesPerView:"3",slidesPerGroup:3},0:{slidesPerView:"2",slidesPerGroup:2}},spaceBetween:20}),ItemsSwiper=new Swiper(".items-swiper",{lazy:!0,grabCursor:!0,spaceBetween:20,slidesPerView:"7",slidesPerGroup:7,navigation:{nextEl:".swiper__button-next",prevEl:".swiper__button-prev"},breakpoints:{1920:{slidesPerView:"6",slidesPerGroup:6},1366:{slidesPerView:"5",slidesPerGroup:5},980:{slidesPerView:"4",slidesPerGroup:4},768:{slidesPerView:"3",slidesPerGroup:3},0:{slidesPerView:"2",slidesPerGroup:2}}});function ChangeCountNotfication(e,t){$(`button[data-type-menu='${e}']`).find(".notification-count").each(function(){let e=Number(this.textContent);switch(t){case"plus":e++;break;case"minus":e--}99<(e=0==e?"":e)&&(e="99+"),this.textContent=e})}function CreateObjectItem(e){var t={id:e.attr("data-id-item"),type:e.attr("data-item-type"),favorite:e.attr("data-favorite"),name:[e.find(".item__name").text().trim(),e.find(".item__name").attr("date-decoration")],like_count:e.find(".item__likes").text().trim(),views_count:e.find(".item__views").text().trim(),img:e.find(".item__img").attr("src"),user:{id:e.find(".item__user").attr("data-id-user"),name:e.find(".item__user-name").text().trim(),img:e.find(".item__avatar").attr("src")}};switch(0!=e.find(".item__user-status").length?t.user.status="PRO":t.user.status="default",t.type){case"action":t.actionType=e.attr("data-type-action"),t.dateTime=e.find(".item__date-time").text().trim(),t.BetStatus=e.find(".item__price-status").attr("data-status"),t.BetCount=e.find(".item__price").text().trim();break;case"onsell":t.price=e.find(".item__price").text().trim(),e.find(".discount")?t.discount=e.find(".discount").text().trim():t.discount="0"}return t}function CreateDOMItem(i){if("action"==i.type){let e,t="",a;return a="start"==i.BetStatus?(e="Начальная ставка",'<i class="fa-solid fa-caret-right"></i>'):(e="Текущая ставка",'<i class="fa-solid fa-sort-up"></i>'),"PRO"==i.user.status&&(t='<img src="assets/images/main/pro.svg" alt="" class="item__user-status"></img>'),`
    <div class="item" data-favorite="${i.favorite}"" data-id-item="${i.id}" data-item-type="action" data-type-action="${i.actionType}">
        <a class="item__img-wrapper" href="">
            <img src="${i.img}" alt="" class="item__img">
        </a>
        <button class="favorite-btn" type="button" onclick='DeleteFavorite(event)'>           
        </button>
        <div class="item__body">
            <div class="item__element">
                <span class="item__type">
                    Аукцион
                </span>
                <span class="item__price-status" data-status="${i.BetStatus}">
                    ${e}
                </span>
                <span class="item__name" date-decoration="${i.name[1]}">
                    ${i.name[0]}
                </span>
                <span class="item__price" data-status="${i.BetStatus}">
                    <i class="fa-solid fa-caret-right"></i> ${i.BetCount}
                </span>
            </div>
            <div class="item__element">
                <div class="item__date-time">
                    ${i.dateTime}
                </div>
                <div class="item__user" data-id-user="${i.user.id}">
                    <img src="${i.user.img}" alt="" class="item__avatar">
                    <a class="item__user-name" href="">
                        ${i.user.name}
                        ${t}
                    </a>
                    <span class="item__likes">
                        <i class="fa-solid fa-thumbs-up"></i>${i.like_count}
                    </span>
                    <span class="item__views">
                        <i class="fa-solid fa-eye"></i>${i.views_count}
                    </span>
                </div>
            </div>
        </div>
        </div>`}}function GetCurrentYpos(){return document.body.scrollTop||document.documentElement.scrollTop}function GetHeightPage(){return document.documentElement.scrollHeight-document.documentElement.clientHeight}function DeleteFavorite(e){var e=e.target.closest(".item"),t=$('.moved-menu[data-type-menu="followed"] .moved-menu__body'),a=e.getAttribute("data-id-item");e.remove(),ChangeCountNotfication("followed","minus"),$(`.item[data-id-item='${a}']`).attr("data-favorite","false"),t.find(`.item[data-id-item='${a}']`).remove(),0==t.find(".item").length&&(t.find(".moved-menu__wrapper").empty(),t.attr("data-body-type","empty"),t.append(` <img src="assets/images/main/empty_moved-icon.svg" alt="" class="moved-menu__img">
               <hgroup class="moved-menu__hgroup">
                  <h2 class="moved-menu__title">
                      В избранном пусто
                  </h2>
                  <p class="moved-menu__subtitle">
                      Добавляйте в избранное понравившиеся изделия, чтобы быстро их находить.
                          Чтобы добавить в избранное нажимайте у изделий на сердечко:
                  </p>
               </hgroup>
               <img src="assets/images/main/heart-icon__filled.svg" alt="" class="moved-menu__img">`))}$(document).ready(function(){function a(){$(".swiper__btns-wrapper").each(function(){switch($(this).attr("data-type-centered")){case"block":var e=$(this).siblings(".swiper-wrapper").height();$(this).css("top",e/2+"px");break;case"img":e=$(this).siblings(".swiper-wrapper").find(".swiper-slide:first-of-type img:first-of-type").height();$(this).css("top",e/2+"px")}})}a(),$(".stats__number-wrapper").each(function(e,t){let a=t.textContent.trim().split("").reverse();var i=[];for(let e=0;e<Math.ceil(a.length/3);e++)i[e]=a.slice(3*e,3*e+3).reverse().join("");a=i,$(this).empty();for(let e=a.length-1;0<=e;e--)$(this).append(`<span class='stats__number'>${a[e]}</span>`)}),$(window).on("scroll resize",function(){a();var e=document.querySelector(".main-header").offsetHeight,t=document.querySelector(".main-footer").offsetHeight;GetCurrentYpos()>e&&GetCurrentYpos()+$(window).height()<$("html").height()-t?$(".moved").addClass("active"):($(".search.active").removeClass("active"),$(".moved").removeClass("active"),$(".moved-aside__btn.active").removeClass("active"),$(".popup.active").fadeOut(100).removeClass("active"))}),$(window).on("click",function(e){var t;e.target.closest("li[data-popup='true']")||($(".popup.active").siblings(".moved-aside__btn.active").removeClass("active"),$(".popup.active").fadeOut(100).removeClass("active")),e.target.closest(".search")||0==$(".search.active .search__input").length||""!=$(".search.active .search__input").val().trim()||$(".search.active").removeClass("active"),e.target.closest("*[data-moved-menu='true']")||e.target.closest(".moved-menu")||e.target.closest(".item")||(t=$(".moved-menu.active").attr("data-type-menu"),$("body").removeClass("scrollBlock"),$(`button[data-type-menu='${t}']`).removeClass("active"),$(".moved-menu.active").removeClass("active")),e.target.closest("*[data-select='true']")||$(".select.active").removeClass("active")}),$(window).on("resize",function(){$(".moved-aside__btn.active").removeClass("active"),$(".popup.active").fadeOut(100).removeClass("active"),$(".submenu.active").removeClass("active")}),$(".favorite-btn").on("click",function(){var e=CreateObjectItem($(this).parents(".item")),t=$('.moved-menu[data-type-menu="followed"] .moved-menu__body'),a=t.attr("data-body-type");"false"==e.favorite?($(`.item[data-id-item=${e.id}]`).attr("data-favorite","true"),e.favorite="true","empty"==a&&(t.empty(),t.attr("data-body-type","filled"),t.append("<div class='moved-menu__wrapper'></div>")),t.find(".moved-menu__wrapper").append(CreateDOMItem(e)),ChangeCountNotfication("followed","plus")):($(`.item[data-id-item=${e.id}]`).attr("data-favorite","false"),e.favorite="false",ChangeCountNotfication("followed","minus"),t.find(`.item[data-id-item='${e.id}']`).remove(),0==t.find(".item").length&&(t.find(".moved-menu__wrapper").empty(),t.attr("data-body-type","empty"),t.append(` <img src="assets/images/main/empty_moved-icon.svg" alt="" class="moved-menu__img">
               <hgroup class="moved-menu__hgroup">
                  <h2 class="moved-menu__title">
                      В избранном пусто
                  </h2>
                  <p class="moved-menu__subtitle">
                      Добавляйте в избранное понравившиеся изделия, чтобы быстро их находить.
                          Чтобы добавить в избранное нажимайте у изделий на сердечко:
                  </p>
               </hgroup>
               <img src="assets/images/main/heart-icon__filled.svg" alt="" class="moved-menu__img">`)))}),$(".moved-aside__btn").on("click",function(){$(this).hasClass("active")?$(".moved-aside__btn.active").removeClass("active"):($(".moved-aside__btn.active").removeClass("active"),$(this).addClass("active"))}),$(".notification__btn").on("click",function(){var e=$(this).attr("data-action");if("close"===e)try{$(this).parents(".notification").slideUp(300,function(){$(this).remove()})}catch(e){}}),$(".search__btn").on("click",function(){$(this).parents(".search").hasClass("active")?$(this).parents(".search").removeClass("active"):$(this).parents(".search").addClass("active")}),$(".popup-opener").on("click",function(){$(this).siblings(".popup").hasClass("active")?$(this).siblings(".popup").fadeOut(100).removeClass("active"):($(".popup.active").removeClass("active").fadeOut(100).removeClass("active"),$(this).siblings(".popup").fadeIn(100).addClass("active"))}),$(".select-opener").on("click",function(){var e=$(this).siblings(".select");if(e.hasClass("active"))e.removeClass("active");else{try{$(".select.active").removeClass("active")}catch{}e.addClass("active")}}),$(".moved-menu-opener").on("click",function(){var e=$(this).attr("data-type-menu");try{$(`.moved-menu[data-type-menu='${e}']`).hasClass("active")?($(`.moved-menu[data-type-menu='${e}']`).removeClass("active"),$(this).removeClass("active")):($(".moved-menu.active").removeClass("active"),$(".submenu.active").removeClass("active"),$(`.moved-menu[data-type-menu='${e}']`).addClass("active"),$(this).addClass("active"),$("body").addClass("scrollBlock"))}catch(e){}}),$(".submenu-opener").on("click",function(){$(this).siblings(".submenu").addClass("active")}),$(".submenu__btn").on("click",function(){var e=$(this).attr("data-action"),t=$(this).parents(".submenu");if("close"===e)try{t.removeClass("active")}catch(e){console.log("Произошла ошибка")}}),$(".moved-menu__btn").on("click",function(){var e=$(this).attr("data-action"),t=$(this).parents(".moved-menu"),a=$(".moved-menu.active").attr("data-type-menu");if("close"===e)try{t.removeClass("active"),$(`button[data-type-menu='${a}']`).removeClass("active"),$("body").removeClass("scrollBlock")}catch(e){}}),$(".select__btn").on("click",function(){var e=$(this).text().trim();$(this).parents(".select").siblings(".select-opener").find(".findpresent__text").html(e),$(".select.active").removeClass("active")})});